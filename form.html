<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>いいねぇ隊 入力フォーム</title>
  <style>
    iframe {
      width: 100%;
      height: 100vh;
      border: none;
    }
  </style>
</head>
<body>
  <p>フォームを読み込み中…</p>
  <iframe id="formFrame" src=""></iframe>

  <form id="hiddenForm" action="https://docs.google.com/forms/d/e/1FAIpQLSdDhwlXKqEjJrkmqsfz-F0WhzrfUoJ7yOLx78xusPLprIGprQ/formResponse" method="POST" target="dummyFrame" style="display:none;">
    <input type="hidden" name="entry.469863943" id="entryDisplayName">
    <input type="hidden" name="entry.1381234537" id="entryUserId">
  </form>

  <iframe name="dummyFrame" style="display:none;"></iframe>

  <script>
    const params = new URLSearchParams(window.location.search);
    const displayName = params.get("displayName") || "";
    const userId = params.get("userId") || "";

    document.getElementById("entryDisplayName").value = displayName;
    document.getElementById("entryUserId").value = userId;
    document.getElementById("hiddenForm").submit();

    const embedURL = `https://docs.google.com/forms/d/e/1FAIpQLSdDhwlXKqEjJrkmqsfz-F0WhzrfUoJ7yOLx78xusPLprIGprQ/viewform?embedded=true&entry.469863943=${displayName}&entry.1381234537=${userId}&pageHistory=0,1`;
    document.getElementById("formFrame").src = embedURL;
  </script>
</body>
</html>